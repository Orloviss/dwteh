/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.8
 *
 */
(function(a){a.fn.extend({slimScroll:function(c){var b=a.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},c);this.each(function(){function i(h){if(s){h=h||window.event;var k=0;h.wheelDelta&&(k=-h.wheelDelta/120);h.detail&&(k=h.detail/3);a(h.target||h.srcTarget||h.srcElement).closest("."+b.wrapperClass).is(N.parent())&&H(k,!0);h.preventDefault&&!K&&h.preventDefault();K||(h.returnValue=!1)}}function H(m,h,l){K=!1;var k=N.outerHeight()-M.outerHeight();h&&(h=parseInt(M.css("top"))+m*parseInt(b.wheelStep)/100*M.outerHeight(),h=Math.min(Math.max(h,0),k),h=0<m?Math.ceil(h):Math.floor(h),M.css({top:h+"px"}));J=parseInt(M.css("top"))/(N.outerHeight()-M.outerHeight());h=J*(N[0].scrollHeight-N.outerHeight());l&&(h=m,m=h/N[0].scrollHeight*N.outerHeight(),m=Math.min(Math.max(m,0),k),M.css({top:m+"px"}));N.scrollTop(h);N.trigger("slimscrolling",~~h);g();G()}function f(){j=Math.max(N.outerHeight()/N[0].scrollHeight*N.outerHeight(),30);M.css({height:j+"px"});var h=j==N.outerHeight()?"none":"block";M.css({display:h})}function g(){f();clearTimeout(D);J==~~J?(K=b.allowPageScroll,o!=J&&N.trigger("slimscroll",0==~~J?"top":"bottom")):K=!1;o=J;j>=N.outerHeight()?K=!0:(M.stop(!0,!0).fadeIn("fast"),b.railVisible&&I.stop(!0,!0).fadeIn("fast"))}function G(){b.alwaysVisible||(D=setTimeout(function(){b.disableFadeOut&&s||e||d||(M.fadeOut("slow"),I.fadeOut("slow"))},1000))}var s,e,d,D,F,j,J,o,K=!1,N=a(this);if(N.parent().hasClass(b.wrapperClass)){var E=N.scrollTop(),M=N.siblings("."+b.barClass),I=N.siblings("."+b.railClass);f();if(a.isPlainObject(c)){if("height" in c&&"auto"==c.height){N.parent().css("height","auto");N.css("height","auto");var L=N.parent().parent().height();N.parent().css("height",L);N.css("height",L)}else{"height" in c&&(L=c.height,N.parent().css("height",L),N.css("height",L))}if("scrollTo" in c){E=parseInt(b.scrollTo)}else{if("scrollBy" in c){E+=parseInt(b.scrollBy)}else{if("destroy" in c){M.remove();I.remove();N.unwrap();return}}}H(E,!1,!0)}}else{if(!(a.isPlainObject(c)&&"destroy" in c)){b.height="auto"==b.height?N.parent().height():b.height;E=a("<div></div>").addClass(b.wrapperClass).css({position:"relative",overflow:"hidden",width:b.width,height:b.height});N.css({overflow:"hidden",width:b.width,height:b.height});var I=a("<div></div>").addClass(b.railClass).css({width:b.size,height:"100%",position:"absolute",top:0,display:b.alwaysVisible&&b.railVisible?"block":"none","border-radius":b.railBorderRadius,background:b.railColor,opacity:b.railOpacity,zIndex:90}),M=a("<div></div>").addClass(b.barClass).css({background:b.color,width:b.size,position:"absolute",top:0,opacity:b.opacity,display:b.alwaysVisible?"block":"none","border-radius":b.borderRadius,BorderRadius:b.borderRadius,MozBorderRadius:b.borderRadius,WebkitBorderRadius:b.borderRadius,zIndex:99}),L="right"==b.position?{right:b.distance}:{left:b.distance};I.css(L);M.css(L);N.wrap(E);N.parent().append(M);N.parent().append(I);b.railDraggable&&M.bind("mousedown",function(k){var h=a(document);d=!0;t=parseFloat(M.css("top"));pageY=k.pageY;h.bind("mousemove.slimscroll",function(l){currTop=t+l.pageY-pageY;M.css("top",currTop);H(0,M.position().top,!1)});h.bind("mouseup.slimscroll",function(l){d=!1;G();h.unbind(".slimscroll")});return !1}).bind("selectstart.slimscroll",function(h){h.stopPropagation();h.preventDefault();return !1});I.hover(function(){g()},function(){G()});M.hover(function(){e=!0},function(){e=!1});N.hover(function(){s=!0;g();G()},function(){s=!1;G()});N.bind("touchstart",function(k,h){k.originalEvent.touches.length&&(F=k.originalEvent.touches[0].pageY)});N.bind("touchmove",function(h){K||h.originalEvent.preventDefault();h.originalEvent.touches.length&&(H((F-h.originalEvent.touches[0].pageY)/b.touchScrollStep,!0),F=h.originalEvent.touches[0].pageY)});f();"bottom"===b.start?(M.css({top:N.outerHeight()-M.outerHeight()}),H(0,!0)):"top"!==b.start&&(H(a(b.start).position().top,null,!0),b.alwaysVisible||M.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}}});return this}});a.fn.extend({slimscroll:a.fn.slimScroll})})(jQuery);